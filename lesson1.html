
<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Dono Bola - 1. Dars</title>

  <style>
    :root {
      --bg: #f0f9ff;
      --primary: #0984e3;
      --success: #00b894;
      --error: #ff6b6b;   /* ‚úÖ ge√§ndert (sanftes Rot) */
      --sun: #fdcb6e;
      --radius: 25px;
    }

    body {
      margin: 0;
      font-family: 'Comic Sans MS', cursive;
      background: var(--bg);
      color: #2d3436;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      min-height: 100vh;
    }

    /* --- HEADER --- */
    .header-box {
      background: white;
      width: 100%;
      max-width: 520px;
      border-radius: var(--radius);
      padding: 15px;
      text-align: center;
      box-shadow: 0 8px 0 rgba(0,0,0,0.05);
      margin-bottom: 12px;
      border: 4px solid white;
    }

    .progress-container { background: #dfe6e9; height: 15px; border-radius: 10px; margin: 10px 0; overflow: hidden; }
    .progress-fill { background: var(--success); height: 100%; width: 0%; transition: width 0.5s; }

    .top-row { display:flex; justify-content: space-between; align-items:center; gap:10px; }

    /* ‚úÖ BIGGER home & book */
    .topIcon {
      font-size: 56px;
      line-height: 1;
      text-decoration: none;
      background: none;
      border: none;
      cursor: pointer;
      padding: 6px 10px;
      border-radius: 18px;
    }
    .topIcon:active { transform: translateY(2px); }

    /* --- Language switch --- */
    .lang-switch{
      display:flex; gap:10px; justify-content:center;
      margin-top: 10px;
    }
    .lang-btn{
      padding:10px 14px; border-radius: 999px;
      border:none; background:#fff; cursor:pointer;
      box-shadow: 0 4px 0 #ccc; font-weight:bold; font-size:14px;
      min-width:70px;
    }
    .lang-btn.active{ background: var(--primary); color:#fff; box-shadow: 0 4px 0 #074b81; }

    /* --- MODUS NAVIGATION --- */
    .mode-nav {
      display: flex;
      gap: 10px;
      margin-bottom: 14px;
      width: 100%;
      max-width: 520px;
      flex-wrap: wrap;
    }
    .mode-btn {
      flex: 1;
      padding: 16px 12px;
      border-radius: 18px;
      border: none;
      background: white;
      font-weight: 900;
      cursor: pointer;
      box-shadow: 0 5px 0 #ccc;
      font-size: 19px;
      min-width: 160px;
      white-space: nowrap;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
    }
    .mode-btn.active { background: var(--primary); color: white; box-shadow: 0 5px 0 #074b81; }

    /* ‚úÖ BIGGER icons in buttons */
    .mode-ico{ font-size: 34px; line-height: 1; }

    /* --- SECTIONS --- */
    #learnSection, #quizSection, #memorySection, #echoSection, #bubbleSection {
      display: none; width: 100%; max-width: 520px; text-align: center;
    }
    #learnSection { display: grid; } /* default */

    /* --- LERN-KARTEN --- */
    .learn-grid { display: grid; grid-template-columns: 1fr; gap: 16px; width: 100%; max-width: 520px; }
    .learn-card {
      background: white; border-radius: var(--radius); padding: 22px;
      display: flex; align-items: center; gap: 16px;
      box-shadow: 0 8px 0 #dfe6e9; border: 3px solid white;
    }
    .learn-emoji { font-size: 68px; width: 86px; text-align:center; }
    .learn-info { text-align: left; flex: 1; }
    .learn-main { font-weight:900; font-size:24px; }
    .learn-sub { color:#636e72; font-size:16px; margin-top:2px; }
    .stars { margin-top: 8px; font-weight: 900; color: #f39c12; font-size: 20px; }

    .btn-audio {
      background: var(--sun); border: none; width: 70px; height: 70px;
      border-radius: 50%; font-size: 28px; cursor: pointer;
      box-shadow: 0 6px 0 #e67e22;
    }
    .btn-audio:active { transform: translateY(3px); box-shadow: 0 3px 0 #e67e22; }

    /* --- QUIZ --- */
    .quiz-card { background: white; border-radius: 30px; padding: 28px; box-shadow: 0 10px 0 #dfe6e9; }
    .quiz-emoji { font-size: 104px; margin-top: 4px; }
    .option-btn {
      width: 100%; padding: 16px; margin: 10px 0; border-radius: 20px;
      border: 3px solid #f1f2f6; background: white; font-size: 18px; font-weight: 900; cursor: pointer;
      box-shadow: 0 5px 0 #f1f2f6;
    }
    .option-btn:active { transform: translateY(2px); box-shadow: none; }

    /* --- MEMORY --- */
    .memory-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
    .memory-card {
      height: 118px; background: var(--primary); border-radius: 18px;
      display: flex; justify-content: center; align-items: center;
      font-size: 30px; color: white; cursor: pointer;
      box-shadow: 0 6px 0 #074b81;
      user-select:none; padding:8px; text-align:center;
    }
    .memory-card.flipped { background: white; color: #2d3436; box-shadow: 0 6px 0 #ccc; }
    .memory-card.matched { visibility: hidden; }

    /* --- ALBUM --- */
    .album-overlay {
      display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8);
      z-index: 1000; justify-content: center; align-items: center;
    }
    .album-content { background: white; padding: 26px; border-radius: 30px; text-align: center; width: 85%; max-width: 420px; }
    .sticker-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      margin-top: 14px;
    }
    .sticker-slot {
      width: 84px; height: 84px; background: #eee; border-radius: 50%;
      display: inline-flex; justify-content: center; align-items: center;
      font-size: 42px; opacity: 0.2; filter: grayscale(1);
      border: 2px dashed #bbb;
    }
    .sticker-slot.unlocked { opacity: 1; filter: none; background: #fff9e6; border: 3px solid var(--sun); }

    /* --- ECHO --- */
    .lion-big { font-size: 138px; margin: 14px; transition: 0.3s; display: inline-block; }
    .talking { animation: mouthMove 0.28s infinite; transform-origin: 50% 70%; }
    @keyframes mouthMove { 0%, 100% { transform: scaleY(1); } 50% { transform: scaleY(1.12); } }

    .mic-btn-huge{
      width: 136px; height: 136px; border-radius: 50%; border: none;
      background: #ff4757; color: white; font-size: 56px; cursor: pointer;
      box-shadow: 0 10px 0 #b33939; margin: 14px;
      touch-action: manipulation;
    }
    .mic-btn-huge:active { transform: translateY(6px); box-shadow: 0 4px 0 #b33939; }
    .mic-btn-huge.active { background: #2ed573; box-shadow: 0 4px 0 #1c9e54; transform: translateY(6px); }

    .banner{
      background:white; padding:15px; border-radius:30px;
      border:4px solid #70a1ff;
      font-size:26px; font-weight:900;
      margin-bottom:10px;
    }
    .small-note{ font-weight:900; color:#334155; font-size:16px; margin-top:6px; }
    .speech-line{
      margin-top:10px;
      padding:12px;
      border-radius:18px;
      background:#fff;
      border:3px dashed #d0d7de;
      font-weight:900;
      color:#111827;
      min-height: 24px;
    }
    .speech-ok{ border-color:#86efac; background:#ecfdf5; }
    .speech-bad{ border-color:#fecaca; background:#fef2f2; }

    /* --- BUBBLES --- */
    #bubbleArea{
      position: relative; width: 100%; height: 60vh;
      background: linear-gradient(#70a1ff, #1e90ff); border-radius: 30px;
      border: 8px solid white; overflow: hidden; margin-top: 10px;
    }
    .bubble{
      position: absolute; width: 118px; height: 118px; background: rgba(255,255,255,0.55);
      border-radius: 50%; display: flex; align-items: center; justify-content: center;
      font-size: 58px; border: 3px solid white; animation: floatUp 4s linear forwards;
      cursor: pointer; user-select:none;
    }
    @keyframes floatUp { 0% { transform: translateY(65vh); } 100% { transform: translateY(-15vh); } }

    /* --- CELEBRATION OVERLAY --- */
    .celebrate-overlay{
      display:none;
      position:fixed; inset:0;
      background: rgba(0,0,0,0.75);
      z-index: 2000;
      align-items:center; justify-content:center;
      padding: 16px;
    }
    .celebrate-overlay.show{ display:flex; }
    .celebrate-card{
      width: 100%;
      max-width: 520px;
      background: white;
      border-radius: 30px;
      padding: 22px;
      text-align:center;
      box-shadow: 0 14px 0 rgba(0,0,0,0.12);
      position: relative;
      overflow: hidden;
      border: 6px solid #fff;
    }
    .celebrate-emoji{ font-size: 78px; }
    .celebrate-title{ font-size: 28px; font-weight: 900; margin-top: 6px; }
    .celebrate-text{ color:#374151; font-weight: 800; margin-top: 8px; font-size: 16px; }
    .celebrate-btn{
      margin-top: 14px;
      width: 100%;
      padding: 14px;
      border-radius: 18px;
      border: none;
      background: var(--success);
      color: white;
      font-weight: 900;
      font-size: 18px;
      cursor: pointer;
      box-shadow: 0 6px 0 #09725b;
    }
    .celebrate-btn:active{ transform: translateY(3px); box-shadow: 0 3px 0 #09725b; }

    .confetti{
      position:absolute; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .dot{
      position:absolute;
      width: 10px; height: 10px;
      border-radius: 50%;
      opacity: 0.95;
      animation: fall 2.2s linear forwards;
    }
    @keyframes fall{
      0%{ transform: translateY(-20px) rotate(0deg); }
      100%{ transform: translateY(560px) rotate(360deg); opacity: 0.9; }
    }
  </style>
</head>

<body>

  <!-- Sounds from your repo -->
  <audio id="cheerAudio" src="sounds/cheer.mp3" preload="auto"></audio>

  <!-- Celebration Overlay -->
  <div class="celebrate-overlay" id="celebrateOverlay">
    <div class="celebrate-card">
      <div class="confetti" id="confetti"></div>
      <div class="celebrate-emoji" id="celebrateEmoji">üéâ</div>
      <div class="celebrate-title" id="celebrateTitle">Barakalla!</div>
      <div class="celebrate-text" id="celebrateText">Zo‚Äòr!</div>
      <button class="celebrate-btn" onclick="closeCelebrate()">OK ‚úÖ</button>
    </div>
  </div>

  <div class="header-box">
    <div class="top-row">
      <a href="index.html" class="topIcon" aria-label="Home">üè†</a>
      <h3 style="margin:0;" id="titleText">1-dars: Salomlashuv</h3>
      <button onclick="toggleAlbum()" class="topIcon" aria-label="Album">üìñ</button>
    </div>

    <div class="progress-container"><div class="progress-fill" id="progressFill"></div></div>
    <small id="progressText">0 / 5</small>

    <div class="lang-switch">
      <button class="lang-btn active" id="langUZ" onclick="setLang('uz')">UZ</button>
      <button class="lang-btn" id="langEN" onclick="setLang('en')">EN</button>
    </div>
  </div>

  <div class="mode-nav">
    <button class="mode-btn active" id="btnLearn"  onclick="changeMode('learn')"><span class="mode-ico">üìñ</span><span id="tLearn">O'rganish</span></button>
    <button class="mode-btn"        id="btnQuiz"   onclick="changeMode('quiz')"><span class="mode-ico">üéØ</span><span id="tQuiz">Test</span></button>
    <button class="mode-btn"        id="btnMemory" onclick="changeMode('memory')"><span class="mode-ico">üß†</span><span id="tMemory">O'yin</span></button>
    <button class="mode-btn"        id="btnEcho"   onclick="changeMode('echo')"><span class="mode-ico">üó£Ô∏è</span><span id="tEcho">Aks-sado</span></button>
    <button class="mode-btn"        id="btnBubble" onclick="changeMode('bubble')"><span class="mode-ico">ü´ß</span><span id="tBubble">Pufakchalar</span></button>
  </div>

  <!-- Learn -->
  <div id="learnSection" class="learn-grid"></div>

  <!-- Quiz -->
  <div id="quizSection">
    <div class="quiz-card">
      <div id="qEmoji" class="quiz-emoji">üëã</div>
      <h2 id="qWordMain" style="margin: 8px 0 10px; font-size: 34px;">Salom</h2>

      <button class="option-btn" style="background:var(--sun); border-color:#f39c12;" onclick="playCurrentQuizAudio()">
        üîä <span id="listenBtnText">Eshitish</span>
      </button>

      <div id="optionsBox"></div>
    </div>
  </div>

  <!-- Memory -->
  <div id="memorySection">
    <div id="memStats" style="margin-bottom:10px; font-weight:900; font-size:16px;">
      <span id="movesLabel">Urinishlar</span>: <span id="moves">0</span>
    </div>
    <div class="memory-grid" id="memoryGrid"></div>
  </div>

  <!-- Echo -->
  <div id="echoSection">
    <div id="lionChar" class="lion-big">ü¶Å</div>

    <div id="echoText" class="banner">Eshiting...</div>

    <div style="display:flex; justify-content:center; flex-wrap:wrap;">
      <button class="mic-btn-huge" style="background:#f1c40f; box-shadow: 0 10px 0 #c49f0a;" onclick="playEchoAudio()">üîä</button>
      <button class="mic-btn-huge" id="micBtn"
        onpointerdown="startMic()" onpointerup="stopMic()" onpointercancel="stopMic()">
        üé§
      </button>
    </div>

    <div class="small-note" id="echoHint">üîÅ Eshit ‚Üí ayt ‚Üí tekshir!</div>
    <div class="speech-line" id="speechLine">üéôÔ∏è ...</div>
    <div class="small-note" id="echoProgress">‚≠ê 0 / 5</div>
    <div class="small-note" id="echoTryLine">üîÅ Urinish: 0 / 3</div>
  </div>

  <!-- Bubbles -->
  <div id="bubbleSection">
    <div id="bubbleTask" class="banner">Top: ...</div>
    <div id="bubbleArea"></div>
    <div class="small-note" id="bubbleHint">Emoji top! ‚≠ê</div>
    <div class="small-note" id="bubbleScoreLine">‚≠ê 0 / 5</div>
  </div>

  <!-- Album -->
  <div id="albumOverlay" class="album-overlay" onclick="toggleAlbum()">
    <div class="album-content" onclick="event.stopPropagation()">
      <h3 id="albumTitle" style="margin-top:0;">Mening Stikerlarim</h3>
      <div class="sticker-grid">
        <div id="stk_1" class="sticker-slot">üê∞</div>
        <div id="stk_2" class="sticker-slot">üêª</div>
        <div id="stk_3" class="sticker-slot">ü¶Å</div>
        <div id="stk_4" class="sticker-slot">üê†</div>
      </div>
      <br>
      <button class="mode-btn" onclick="toggleAlbum()" id="closeAlbumBtn">Yopish</button>
    </div>
  </div>

<script>
  /* JS bleibt bei dir unver√§ndert ‚Äì ich habe hier absichtlich nichts angefasst. */
</script>

</body>
</html>
