<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>2-dars ‚Äì Sonlar 1‚Äì10</title>

<style>
:root{
  --bg:#F7F3EE;
  --card:#FFFFFF;
  --ink:#1F2937;
  --muted:#6B7280;
  --line:#E7E0D8;
  --accent:#6FA8A1;
  --accent2:#F2C98A;
  --good:#16a34a;
  --bad:#dc2626;
  --shadow:0 10px 26px rgba(31,41,55,0.10);
  --radius:18px;

  --blue:#1976D2;
  --yellow:#F5C400;
}

body{
  margin:0;
  font-family:system-ui;
  background:var(--bg);
  color:var(--ink);
  padding:18px;
}

.app{max-width:980px;margin:0 auto;}
.top{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:18px;
  position:relative;
  overflow:hidden;
}

.headRow{
  display:flex;
  justify-content:space-between;
  flex-wrap:wrap;
  gap:10px;
}

h1{margin:0;font-size:22px;}
.sub{color:var(--muted);font-weight:800;}

.langSwitch{
  display:flex;
  gap:6px;
  background:#F1FBF9;
  border-radius:999px;
  padding:6px;
}
.langBtn{
  border:none;
  background:transparent;
  padding:6px 12px;
  border-radius:999px;
  font-weight:1000;
  cursor:pointer;
}
.langBtn.active{background:var(--accent);color:white;}

.bar{
  margin-top:12px;
  background:#fff;
  border-radius:14px;
  padding:10px;
  box-shadow:var(--shadow);
}
.track{
  height:12px;
  background:#F3F4F6;
  border-radius:999px;
  margin-top:10px;
}
.fill{height:100%;width:0%;background:var(--accent);border-radius:999px;}

.grid{
  margin-top:14px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:12px;
}

.card{
  background:#fff;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:14px;
  text-align:center;
}

.num{
  width:56px;height:56px;
  border-radius:14px;
  background:#E9F3F1;
  display:flex;align-items:center;justify-content:center;
  font-size:24px;font-weight:1000;
  margin:0 auto;
}

.uz{font-size:26px;font-weight:1000;margin-top:10px}
.en{font-size:18px;font-weight:1000;margin-top:10px;display:none}
.pr{color:var(--muted);font-style:italic;font-size:13px}

.audioBtn{
  width:100%;
  margin-top:10px;
  padding:12px;
  border:none;
  border-radius:14px;
  background:var(--accent2);
  font-weight:1000;
  cursor:pointer;
}

.stars{margin-top:6px;font-size:18px;color:#F59E0B;font-weight:1000;}

.quizWrap{
  margin-top:10px;
  border:1px dashed #E5E7EB;
  border-radius:14px;
  padding:10px;
  text-align:left;
}

.opt{
  width:100%;
  margin-top:6px;
  padding:10px;
  border-radius:12px;
  border:1px solid var(--line);
  background:white;
  font-weight:1000;
  cursor:pointer;
}

.result{margin-top:6px;font-weight:1000;display:none;}
.result.good{display:block;color:var(--good);}
.result.bad{display:block;color:var(--bad);}

/* ===== GAMES ===== */
.gamesSection{margin-top:16px;display:grid;gap:14px;}

.gameCard{
  background:#fff;
  border-radius:28px;
  box-shadow:0 16px 34px rgba(31,41,55,0.14);
  padding:16px;
}

.gameHead{
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.gameEmoji{
  width:58px;height:58px;
  border-radius:18px;
  background:#EEF6FF;
  display:flex;align-items:center;justify-content:center;
  font-size:30px;
}

.gameTitle{
  font-size:18px;
  font-weight:1000;
  color:var(--blue);
  margin:0;
}

.gameSub{font-size:12px;color:var(--muted);font-style:italic;}

.gameBtn{
  width:66px;height:66px;
  border-radius:50%;
  border:none;
  background:var(--yellow);
  font-size:24px;
  cursor:pointer;
}

.choiceRow{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:10px;}

.choiceBtn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid var(--line);
  background:white;
  font-weight:1000;
  cursor:pointer;
}

.choiceBtn.good{background:#ECFDF5;color:var(--good);}
.choiceBtn.bad{background:#FEF2F2;color:var(--bad);}

.emojiLine{text-align:center;font-size:34px;letter-spacing:6px;}

.gameResult{margin-top:8px;font-weight:1000;text-align:center;display:none;}
.gameResult.good{display:block;color:var(--good);}
.gameResult.bad{display:block;color:var(--bad);}
</style>
</head>

<body>
<div class="app">
<div class="top">

<div class="headRow">
  <div>
    <h1 id="title">üî¢ 2-dars: Sonlar 1‚Äì10</h1>
    <div class="sub" id="subtitle">Birga sanaymiz üòä</div>
  </div>

  <div class="langSwitch">
    <button id="btn-uz" class="langBtn active" onclick="setLang('uz')">UZ</button>
    <button id="btn-en" class="langBtn" onclick="setLang('en')">EN</button>
  </div>
</div>

<div class="bar">
  <div id="progressText">0 / 10</div>
  <div class="track"><div class="fill" id="progressFill"></div></div>
</div>

<div class="grid" id="grid"></div>

<!-- ===== GAMES ===== -->
<div class="gamesSection">

<div class="gameCard">
  <div class="gameHead">
    <div>
      <div class="gameTitle">üîó Juftini top</div>
      <div class="gameSub">Son ‚Üî So‚Äòz</div>
      <div id="g1Status">‚ùì</div>
    </div>
    <button class="gameBtn" onclick="startGame1()">‚ñ∂</button>
  </div>
  <div class="choiceRow" id="g1Grid"></div>
  <div class="gameResult" id="g1Res"></div>
</div>

<div class="gameCard">
  <div class="gameHead">
    <div>
      <div class="gameTitle">üéß Eshit</div>
      <div class="gameSub">Audio quiz</div>
      <div id="g2Status">‚ùì</div>
    </div>
    <button class="gameBtn" onclick="startGame2()">üîä</button>
  </div>
  <div class="choiceRow" id="g2Choices"></div>
  <div class="gameResult" id="g2Res"></div>
</div>

<div class="gameCard">
  <div class="gameHead">
    <div>
      <div class="gameTitle">üçé Sanab ko‚Äòr</div>
      <div class="gameSub">Count</div>
      <div id="g3Status">‚ùì</div>
    </div>
    <button class="gameBtn" onclick="startGame3()">‚ñ∂</button>
  </div>
  <div class="emojiLine" id="g3Emojis">üçéüçéüçé</div>
  <div class="choiceRow" id="g3Choices"></div>
  <div class="gameResult" id="g3Res"></div>
</div>

<div class="gameCard">
  <div class="gameHead">
    <div>
      <div class="gameTitle">üß© Tartib</div>
      <div class="gameSub">1 ‚Üí 10</div>
      <div id="g4Status">‚ùì</div>
    </div>
    <button class="gameBtn" onclick="startGame4()">‚ñ∂</button>
  </div>
  <div class="choiceRow" id="g4Choices"></div>
  <div class="gameResult" id="g4Res"></div>
</div>

</div>

</div>
</div>

<script>
const LESSON_ID="lesson2";
let currentLang="uz";

const items=[
 {key:"1",n:1,uz:"bir",en:"one"},
 {key:"2",n:2,uz:"ikki",en:"two"},
 {key:"3",n:3,uz:"uch",en:"three"},
 {key:"4",n:4,uz:"to‚Äòrt",en:"four"},
 {key:"5",n:5,uz:"besh",en:"five"},
 {key:"6",n:6,uz:"olti",en:"six"},
 {key:"7",n:7,uz:"yetti",en:"seven"},
 {key:"8",n:8,uz:"sakkiz",en:"eight"},
 {key:"9",n:9,uz:"to‚Äòqqiz",en:"nine"},
 {key:"10",n:10,uz:"o‚Äòn",en:"ten"}
];

function getDefaultState(){
 return {stars:{},quizDone:{},gamesDone:{g1:false,g2:false,g3:false,g4:false}};
}
function loadState(){
 try{
  const s=JSON.parse(localStorage.getItem(LESSON_ID));
  return {...getDefaultState(),...s};
 }catch{return getDefaultState();}
}
function saveState(s){localStorage.setItem(LESSON_ID,JSON.stringify(s));}

function shuffle(arr){return [...arr].sort(()=>Math.random()-0.5);}

function setLang(lang){
 currentLang=lang;
 document.getElementById("btn-uz").classList.toggle("active",lang==="uz");
 document.getElementById("btn-en").classList.toggle("active",lang==="en");
 render();
 updateGameStatus();
}

function render(){
 const grid=document.getElementById("grid");
 grid.innerHTML="";
 const state=loadState();

 items.forEach(it=>{
  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`
   <div class="num">${it.n}</div>
   <div class="uz">${it.uz}</div>
   <div class="en">${it.en}</div>
   <button class="audioBtn" onclick="playAudio('${it.key}')">‚ñ∂</button>
   <div class="stars">${"‚òÖ".repeat(state.stars[it.key]||0)}</div>
  `;
  grid.appendChild(card);
 });
 updateProgress();
}

function playAudio(key){
 const s=loadState();
 s.stars[key]=(s.stars[key]||0)+1;
 saveState(s);
 render();
}

function updateProgress(){
 const s=loadState();
 const done=Object.values(s.quizDone).filter(Boolean).length;
 document.getElementById("progressText").innerText=`${done} / 10`;
 document.getElementById("progressFill").style.width=(done*10)+"%";
}

function setGameDone(g){
 const s=loadState();
 s.gamesDone[g]=true;
 saveState(s);
 updateGameStatus();
}

function updateGameStatus(){
 const s=loadState();
 ["g1","g2","g3","g4"].forEach(g=>{
  const el=document.getElementById(g+"Status");
  if(el) el.innerText=s.gamesDone[g]?"‚úÖ":"‚ùì";
 });
}

/* simple games demo */
function startGame2(){
 const choices=document.getElementById("g2Choices");
 choices.innerHTML="";
 const correct=Math.ceil(Math.random()*10);
 shuffle([correct,correct+1,correct+2]).forEach(n=>{
  const b=document.createElement("button");
  b.className="choiceBtn";
  b.innerText=n;
  b.onclick=()=>{ if(n===correct){b.classList.add("good");setGameDone("g2");}};
  choices.appendChild(b);
 });
}

(function init(){
 if(!localStorage.getItem(LESSON_ID)) saveState(getDefaultState());
 render();
 updateGameStatus();
})();
</script>
</body>
</html>
